<%- include("../layout/header") %>

<!-- ================= PAGE HEADER ================= -->
<section class="page-header">
  <div class="container">
    <h1 data-i18n="reportTitle">Check Your Report</h1>
    <p data-i18n="reportSubtitle">
      Enter your Report ID or registered Phone Number
    </p>
  </div>
</section>

<!-- ================= REPORT CHECK ================= -->
<section class="report-check">
  <div class="container">

    <div class="report-card">

      <!-- FORM -->
      <form method="POST" action="https://aarogyam-pathology.onrender.com/report-status" class="report-form">
        <label data-i18n="reportLabel">Report ID / Phone Number</label>

        <input
          type="text"
          name="searchValue"
          placeholder="Eg: A12B34CD or 98XXXXXXXX"
          required
        >

        <button type="submit" class="btn-primary full-width">
          ğŸ” <span data-i18n="checkStatus">Check Report Status</span>
        </button>
      </form>

      <!-- ERROR -->
      <% if (error) { %>
        <div class="report-error">
          âŒ <%= error %>
        </div>
      <% } %>

      <!-- SUCCESS -->
      <% if (report) { %>
        <div class="report-result success">
          <h3>âœ… <span data-i18n="reportFound">Report Found</span></h3>

          <p><strong data-i18n="patient">Patient:</strong> <%= report.patientName %></p>
          <p><strong data-i18n="test">Test:</strong> <%= report.testName %></p>
          <p><strong data-i18n="reportId">Report ID:</strong> <%= report.reportId %></p>

          <a href="<%= report.filePath %>" class="btn-primary" download>
            ğŸ“„ <span data-i18n="downloadReport">Download Report (PDF)</span>
          </a>
        </div>
      <% } %>

    </div>

  </div>
</section>

<%- include("../layout/footer") %>
